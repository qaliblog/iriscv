name: Download OpenCV SDK

on:
  workflow_dispatch:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

jobs:
  download-opencv:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
      
    - name: Download OpenCV Android SDK
      run: |
        OPENCV_VERSION="4.8.0"
        OPENCV_URL="https://github.com/opencv/opencv/releases/download/${OPENCV_VERSION}/opencv-${OPENCV_VERSION}-android-sdk.zip"
        
        mkdir -p opencv-sdk
        cd opencv-sdk
        
        echo "Downloading OpenCV ${OPENCV_VERSION} Android SDK..."
        wget -q ${OPENCV_URL} -O opencv-sdk.zip
        
        echo "Extracting OpenCV SDK..."
        unzip -q opencv-sdk.zip
        
        echo "OpenCV SDK downloaded and extracted successfully"
        ls -la
        
    - name: Upload OpenCV SDK
      uses: actions/upload-artifact@v3
      with:
        name: opencv-android-sdk
        path: opencv-sdk/*
        retention-days: 30
